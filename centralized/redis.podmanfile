FROM redis:alpine

VOLUME [ "/usr/local/etc/redis" ]

RUN touch /usr/local/etc/redis/redis.conf

RUN echo \
"maxmemory ${maxmemory}\n \
maxmemory-policy ${maxmemory_policy}\n" \
> /usr/local/etc/redis/redis.conf

CMD [ "redis-server", "/usr/local/etc/redis/redis.conf" ]

EXPOSE 6379

VOLUME [ "/data" ]
